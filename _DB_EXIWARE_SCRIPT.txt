DROP DATABASE Exiware

CREATE DATABASE Exiware

USE Exiware
GO

CREATE TABLE SUCURSAL
(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	NOMBRE NVARCHAR(MAX) NOT NULL,
	TELEFONO NVARCHAR(MAX) NOT NULL,
	DIRECCION NVARCHAR(MAX) NOT NULL
);

CREATE TABLE EMPLEADO
(	
	ID INT IDENTITY(1,1) PRIMARY KEY,
	DOCUMENTO NVARCHAR(MAX) NOT NULL,
	NOMBRE NVARCHAR(MAX) NOT NULL,
	APELLIDO NVARCHAR(MAX) NOT NULL,
	ID_SUCURSAL INT
);

CREATE TABLE CLIENTE
(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	DOCUMENTO NVARCHAR(MAX) NOT NULL,
	NOMBRE NVARCHAR(MAX) NOT NULL,
	APELLIDO NVARCHAR(MAX) NOT NULL,
	ESTADO BIT NOT NULL
);

CREATE TABLE PRODUCTO
(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	NOMBRE NVARCHAR(MAX) NOT NULL,
	STOCK INT NOT NULL
);

CREATE TABLE PEDIDO
(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	ID_SUCURSAL INT,
	ID_EMPLEADO INT,
	ID_CLIENTE INT,
	FECHA DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
);

CREATE TABLE PEDIDO_DETALLE
(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	ID_PEDIDO INT,
	ID_PRODUCTO INT,
	PRODUCTO_CANTIDAD INT NOT NULL
);


ALTER TABLE EMPLEADO
ADD FOREIGN KEY (ID_SUCURSAL) REFERENCES SUCURSAL(ID);

ALTER TABLE PEDIDO
ADD FOREIGN KEY (ID_SUCURSAL) REFERENCES SUCURSAL(ID);

ALTER TABLE PEDIDO
ADD FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO(ID);

ALTER TABLE PEDIDO
ADD FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID);

ALTER TABLE PEDIDO_DETALLE
ADD FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO(ID);

ALTER TABLE PEDIDO_DETALLE
ADD FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO(ID);
